const CACHE_NAME='arpeggio-pro-v6';const ASSETS_TO_CACHE=['./','./index.html','./style.css','./script.js','./manifest.json','./icon.png','https://cdn.jsdelivr.net/npm/@tonaljs/tonal/browser/tonal.min.js','https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js'];self.addEventListener('install',e=>{self.skipWaiting();e.waitUntil(caches.open(CACHE_NAME).then(e=>(console.log('[SW] Caching'),e.addAll(ASSETS_TO_CACHE))))});self.addEventListener('activate',e=>{e.waitUntil(caches.keys().then(e=>Promise.all(e.map(e=>{if(e!==CACHE_NAME)return console.log('[SW] Removing:',e),caches.delete(e)}))));self.clients.claim()});self.addEventListener('fetch',e=>{'GET'===e.request.method&&e.respondWith(caches.match(e.request).then(t=>t||fetch(e.request).catch(e=>{console.log('[SW] Fetch failed:',e)})))});
